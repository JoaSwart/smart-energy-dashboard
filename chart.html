<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zonnepaneel Opbrengst</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .chart-container {
            width: 80%;
            max-width: 1200px;
            background-color: #ffffff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <div class="chart-container">
        <canvas id="solarChart"></canvas>
    </div>

    <script>
        const rawData = `
Tijdstip,Zonnepaneelspanning (V),Zonnepaneelstroom (A)
14-6-2025 00:00,4.1,0.098042185
14-6-2025 00:15,4.1,0.103300228
14-6-2025 00:30,4.1,0.057381341
14-6-2025 00:45,4.1,0.129589924
14-6-2025 01:00,4.1,0.11713194
14-6-2025 01:15,4.1,0.120478424
14-6-2025 01:30,4.1,0.110409521
14-6-2025 01:45,4.1,0.086984042
14-6-2025 02:00,4.1,0.122285862
14-6-2025 02:15,4.1,0.145146231
14-6-2025 02:30,4.1,0.089447945
14-6-2025 02:45,4.1,0.107497842
14-6-2025 03:00,4.1,0.087446007
14-6-2025 03:15,4.1,0.090591232
14-6-2025 03:30,4.1,0.111815234
14-6-2025 03:45,4.1,0.113713044
14-6-2025 04:00,4.1,0.049237492
14-6-2025 04:15,4.1,0.129709928
14-6-2025 04:30,4.1,0.096878393
14-6-2025 04:45,4.1,0.093751567
14-6-2025 05:00,4.1,0.092624682
14-6-2025 05:15,4.1,0.14254981
14-6-2025 05:30,4.1,0.108207135
14-6-2025 05:45,4.1,0.113015541
14-6-2025 06:00,4.1,0
14-6-2025 06:15,4.767926337,0.151994573
14-6-2025 06:30,5.432869554,0.393791357
14-6-2025 06:45,6.091859851,0.638479579
14-6-2025 07:00,6.741954019,0.792318418
14-6-2025 07:15,7.380248578,1.003805401
14-6-2025 07:30,8.003892752,1.206571206
14-6-2025 07:45,8.610101192,1.362823367
14-6-2025 08:00,9.196166426,1.554543429
14-6-2025 08:15,9.759470943,1.869686958
14-6-2025 08:30,10.29749889,1.93135937
14-6-2025 08:45,10.8078473,2.013594105
14-6-2025 09:00,11.28823684,2.177028591
14-6-2025 09:15,11.73652197,2.29062168
14-6-2025 09:30,12.15070053,2.386674027
14-6-2025 09:45,12.52892271,2.665796632
14-6-2025 10:00,12.86949928,2.596225244
14-6-2025 10:15,13.17090914,2.712218492
14-6-2025 10:30,13.43180611,2.897752242
14-6-2025 10:45,13.65102497,2.943373798
14-6-2025 11:00,13.82758664,3.029583841
14-6-2025 11:15,13.96070254,3.037702582
14-6-2025 11:30,14.04977815,3.064926762
14-6-2025 11:45,14.09441564,3.063435706
14-6-2025 12:00,14.09441564,3.077282734
14-6-2025 12:15,14.04977815,3.112927234
14-6-2025 12:30,13.96070254,3.084427306
14-6-2025 12:45,13.82758664,2.979688151
14-6-2025 13:00,13.65102497,2.875730518
14-6-2025 13:15,13.43180611,2.816727422
14-6-2025 13:30,13.17090914,2.817452978
14-6-2025 13:45,12.86949928,2.652675929
14-6-2025 14:00,12.52892271,2.646921243
14-6-2025 14:15,12.15070053,2.473128993
14-6-2025 14:30,11.73652197,2.335691786
14-6-2025 14:45,11.28823684,2.102078268
14-6-2025 15:00,10.8078473,2.002397835
14-6-2025 15:15,10.29749889,1.914892171
14-6-2025 15:30,9.759470943,1.666063873
14-6-2025 15:45,9.196166426,1.565647034
14-6-2025 16:00,8.610101192,1.333158904
14-6-2025 16:15,8.003892752,1.214476563
14-6-2025 16:30,7.380248578,1.045324967
14-6-2025 16:45,6.741954019,0.711271922
14-6-2025 17:00,6.091859851,0.540602909
14-6-2025 17:15,5.432869554,0.479224534
14-6-2025 17:30,4.767926337,0.115470762
14-6-2025 17:45,4.1,0
14-6-2025 18:00,4.1,0.10067647
14-6-2025 18:15,4.1,0.117289465
14-6-2025 18:30,4.1,0.085767058
14-6-2025 18:45,4.1,0.105017114
14-6-2025 19:00,4.1,0.122850571
14-6-2025 19:15,4.1,0.14745865
14-6-2025 19:30,4.1,0.080472884
14-6-2025 19:45,4.1,0.1339681
14-6-2025 20:00,4.1,0.059449869
14-6-2025 20:15,4.1,0.065236538
14-6-2025 20:30,4.1,0.071222777
14-6-2025 20:45,4.1,0.089751911
14-6-2025 21:00,4.1,0.107025333
14-6-2025 21:15,4.1,0.106681884
14-6-2025 21:30,4.1,0.096433251
14-6-2025 21:45,4.1,0.086108185
14-6-2025 22:00,4.1,0.12042298
14-6-2025 22:15,4.1,0.114943054
14-6-2025 22:30,4.1,0.097530403
14-6-2025 22:45,4.1,0.110012782
14-6-2025 23:00,4.1,0.12531402
14-6-2025 23:15,4.1,0.138924997
14-6-2025 23:30,4.1,0.086491764
14-6-2025 23:45,4.1,0.107115252
15-6-2025 00:00,4.1,0.096832178
15-6-2025 00:15,4.1,0.100592104
15-6-2025 00:30,4.1,0.055877028
15-6-2025 00:45,4.1,0.126192589
15-6-2025 01:00,4.1,0.114061204
15-6-2025 01:15,4.1,0.117319956
15-6-2025 01:30,4.1,0.10751502
15-6-2025 01:45,4.1,0.084703664
15-6-2025 02:00,4.1,0.11908001
15-6-2025 02:15,4.1,0.141341071
15-6-2025 02:30,4.1,0.087102973
15-6-2025 02:45,4.1,0.104679674
15-6-2025 03:00,4.1,0.085153519
15-6-2025 03:15,4.1,0.088216288
15-6-2025 03:30,4.1,0.10888388
15-6-2025 03:45,4.1,0.110731938
15-6-2025 04:00,4.1,0.047946679
15-6-2025 04:15,4.1,0.126309446
15-6-2025 04:30,4.1,0.094338625
15-6-2025 04:45,4.1,0.091293772
15-6-2025 05:00,4.1,0.090196429
15-6-2025 05:15,4.1,0.138812717
15-6-2025 05:30,4.1,0.105370372
15-6-2025 05:45,4.1,0.110052721
15-6-2025 06:00,4.1,0
15-6-2025 06:15,4.767926337,0.148009876
15-6-2025 06:30,5.432869554,0.383467705
15-6-2025 06:45,6.091859851,0.621741169
15-6-2025 07:00,6.741954019,0.771546962
15-6-2025 07:15,7.380248578,0.977489593
15-6-2025 07:30,8.003892752,1.17493968
15-6-2025 07:45,8.610101192,1.327095527
15-6-2025 08:00,9.196166426,1.513789448
15-6-2025 08:15,9.759470943,1.82067116
15-6-2025 08:30,10.29749889,1.880726765
15-6-2025 08:45,10.8078473,1.960805631
15-6-2025 09:00,11.28823684,2.11995551
15-6-2025 09:15,11.73652197,2.230570638
15-6-2025 09:30,12.15070053,2.324104872
15-6-2025 09:45,12.52892271,2.595909986
15-6-2025 10:00,12.86949928,2.528162484
15-6-2025 10:15,13.17090914,2.641114848
15-6-2025 10:30,13.43180611,2.821784637
15-6-2025 10:45,13.65102497,2.866210176
15-6-2025 11:00,13.82758664,2.950160132
15-6-2025 11:15,13.96070254,2.958066032
15-6-2025 11:30,14.04977815,2.984576502
15-6-2025 11:45,14.09441564,2.983124536
15-6-2025 12:00,14.09441564,2.996608549
15-6-2025 12:15,14.04977815,3.031318591
15-6-2025 12:30,13.96070254,3.003565819
15-6-2025 12:45,13.82758664,2.90157251
15-6-2025 13:00,13.65102497,2.800340236
15-6-2025 13:15,13.43180611,2.742883968
15-6-2025 13:30,13.17090914,2.743590502
15-6-2025 13:45,12.86949928,2.583133256
15-6-2025 14:00,12.52892271,2.577529435
15-6-2025 14:15,12.15070053,2.408293331
15-6-2025 14:30,11.73652197,2.274459184
15-6-2025 14:45,11.28823684,2.046970088
15-6-2025 15:00,10.8078473,1.949902882
15-6-2025 15:15,10.29749889,1.864691271
15-6-2025 15:30,9.759470943,1.622386266
15-6-2025 15:45,9.196166426,1.52460196
15-6-2025 16:00,8.610101192,1.298208749
15-6-2025 16:15,8.003892752,1.18263779
15-6-2025 16:30,7.380248578,1.01792068
15-6-2025 16:45,6.741954019,0.692625185
15-6-2025 17:00,6.091859851,0.526430439
15-6-2025 17:15,5.432869554,0.466661162
15-6-2025 17:30,4.767926337,0.112443575
15-6-2025 17:45,4.1,0
15-6-2025 18:00,4.1,0.098037131
15-6-2025 18:15,4.1,0.114214599
15-6-2025 18:30,4.1,0.083518585
15-6-2025 18:45,4.1,0.10226398
15-6-2025 19:00,4.1,0.119629915
15-6-2025 19:15,4.1,0.143592868
15-6-2025 19:30,4.1,0.078363203
15-6-2025 19:45,4.1,0.130455889
15-6-2025 20:00,4.1,0.057891328
15-6-2025 20:15,4.1,0.063526294
15-6-2025 20:30,4.1,0.069355598
15-6-2025 20:45,4.1,0.087398971
15-6-2025 21:00,4.1,0.104219552
15-6-2025 21:15,4.1,0.103885107
15-6-2025 21:30,4.1,0.093905152
15-6-2025 21:45,4.1,0.083850769
15-6-2025 22:00,4.1,0.117265965
15-6-2025 22:15,4.1,0.111929702
15-6-2025 22:30,4.1,0.094973541
15-6-2025 22:45,4.1,0.107128682
15-6-2025 23:00,4.1,0.122028782
15-6-2025 23:15,4.1,0.135282933
15-6-2025 23:30,4.1,0.084224292
15-6-2025 23:45,4.1,0.104307114
16-6-2025 00:00,4.1,0.096101009
16-6-2025 00:15,4.1,0.102520219
16-6-2025 00:30,4.1,0.05694806
16-6-2025 00:45,4.1,0.128611405
16-6-2025 01:00,4.1,0.11624749
16-6-2025 01:15,4.1,0.119568704
16-6-2025 01:30,4.1,0.109575831
16-6-2025 01:45,4.1,0.086327235
16-6-2025 02:00,4.1,0.121362495
16-6-2025 02:15,4.1,0.144050248
16-6-2025 02:30,4.1,0.088772533
16-6-2025 02:45,4.1,0.106686138
16-6-2025 03:00,4.1,0.086785712
16-6-2025 03:15,4.1,0.089907187
16-6-2025 03:30,4.1,0.11097093
16-6-2025 03:45,4.1,0.112854409
16-6-2025 04:00,4.1,0.048865705
16-6-2025 04:15,4.1,0.128730503
16-6-2025 04:30,4.1,0.096146875
16-6-2025 04:45,4.1,0.09304366
16-6-2025 05:00,4.1,0.091925283
16-6-2025 05:15,4.1,0.141473432
16-6-2025 05:30,4.1,0.107390075
16-6-2025 05:45,4.1,0.112162174
16-6-2025 06:00,4.1,0
16-6-2025 06:15,4.767926337,0.150846879
16-6-2025 06:30,5.432869554,0.390817883
16-6-2025 06:45,6.091859851,0.633658491
16-6-2025 07:00,6.741954019,0.786335709
16-6-2025 07:15,7.380248578,0.996225778
16-6-2025 07:30,8.003892752,1.19746052
16-6-2025 07:45,8.610101192,1.352532839
16-6-2025 08:00,9.196166426,1.542805244
16-6-2025 08:15,9.759470943,1.855569159
16-6-2025 08:30,10.29749889,1.91677589
16-6-2025 08:45,10.8078473,1.998389679
16-6-2025 09:00,11.28823684,2.16059009
16-6-2025 09:15,11.73652197,2.27332545
16-6-2025 09:30,12.15070053,2.368652516
16-6-2025 09:45,12.52892271,2.645667497
16-6-2025 10:00,12.86949928,2.576621435
16-6-2025 10:15,13.17090914,2.691738831
16-6-2025 10:30,13.43180611,2.875871636
16-6-2025 10:45,13.65102497,2.921148709
16-6-2025 11:00,13.82758664,3.006707789
16-6-2025 11:15,13.96070254,3.014765226
16-6-2025 11:30,14.04977815,3.04178384
16-6-2025 11:45,14.09441564,3.040304043
16-6-2025 12:00,14.09441564,3.054046513
16-6-2025 12:15,14.04977815,3.089421866
16-6-2025 12:30,13.96070254,3.061137138
16-6-2025 12:45,13.82758664,2.957188856
16-6-2025 13:00,13.65102497,2.854016196
16-6-2025 13:15,13.43180611,2.795458626
16-6-2025 13:30,13.17090914,2.796178703
16-6-2025 13:45,12.86949928,2.632645867
16-6-2025 14:00,12.52892271,2.626934634
16-6-2025 14:15,12.15070053,2.454454671
16-6-2025 14:30,11.73652197,2.318055237
16-6-2025 14:45,11.28823684,2.086205708
16-6-2025 15:00,10.8078473,1.987277951
16-6-2025 15:15,10.29749889,1.900433033
16-6-2025 15:30,9.759470943,1.65348361
16-6-2025 15:45,9.196166426,1.553825007
16-6-2025 16:00,8.610101192,1.323092369
16-6-2025 16:15,8.003892752,1.205306186
16-6-2025 16:30,7.380248578,1.037431834
16-6-2025 16:45,6.741954019,0.705901186
16-6-2025 17:00,6.091859851,0.536520877
16-6-2025 17:15,5.432869554,0.475605963
16-6-2025 17:30,4.767926337,0.114598855
16-6-2025 17:45,4.1,0
16-6-2025 18:00,4.1,0.099916273
16-6-2025 18:15,4.1,0.116403826
16-6-2025 18:30,4.1,0.085119441
16-6-2025 18:45,4.1,0.104224141
16-6-2025 19:00,4.1,0.12192294
16-6-2025 19:15,4.1,0.146345206
16-6-2025 19:30,4.1,0.079865242
16-6-2025 19:45,4.1,0.132956423
16-6-2025 20:00,4.1,0.059000969
16-6-2025 20:15,4.1,0.064743944
16-6-2025 20:30,4.1,0.070684982
16-6-2025 20:45,4.1,0.089074204
16-6-2025 21:00,4.1,0.106217197
16-6-2025 21:15,4.1,0.105876341
16-6-2025 21:30,4.1,0.095705094
16-6-2025 21:45,4.1,0.085457992
16-6-2025 22:00,4.1,0.119513679
16-6-2025 22:15,4.1,0.114075132
16-6-2025 22:30,4.1,0.096793962
16-6-2025 22:45,4.1,0.109182088
16-6-2025 23:00,4.1,0.124367788
16-6-2025 23:15,4.1,0.13787599
16-6-2025 23:30,4.1,0.085838675
16-6-2025 23:45,4.1,0.106306437
        `;

        // Functie om de CSV-data te parsen en te groeperen per dag
        function parseAndProcessData(csv) {
            const lines = csv.trim().split('\n').slice(1);
            const datasets = {};

            lines.forEach(line => {
                const [dateTime, voltageStr, currentStr] = line.split(',');
                const [datePart, timePart] = dateTime.split(' ');
                const [day, month, year] = datePart.split('-').map(Number);
                const [hours, minutes] = timePart.split(':').map(Number);
                
                // Let op: Maand is 0-gebaseerd in JavaScript Date
                const timestamp = new Date(year, month - 1, day, hours, minutes);

                const voltage = parseFloat(voltageStr.replace(',', '.'));
                const current = parseFloat(currentStr.replace(',', '.'));
                const power = voltage * current;

                if (!datasets[datePart]) {
                    datasets[datePart] = {
                        label: `Opbrengst ${datePart}`,
                        data: [],
                        borderColor: getRandomColor(),
                        backgroundColor: 'rgba(0, 0, 0, 0.05)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 2,
                    };
                }
                datasets[datePart].data.push({ x: timestamp, y: power });
            });

            return Object.values(datasets);
        }

        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        const chartData = parseAndProcessData(rawData);

        const ctx = document.getElementById('solarChart').getContext('2d');
        const solarChart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: chartData
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Zonnepaneel Opbrengst per Dag',
                        font: {
                            size: 18
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y.toFixed(2) + ' W';
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'hour',
                            tooltipFormat: 'dd-MM-yyyy HH:mm',
                            displayFormats: {
                                hour: 'HH:mm'
                            }
                        },
                        title: {
                            display: true,
                            text: 'Tijd'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Vermogen (Watt)'
                        }
                    }
                }
            }
        });
    </script>

</body>
</html>